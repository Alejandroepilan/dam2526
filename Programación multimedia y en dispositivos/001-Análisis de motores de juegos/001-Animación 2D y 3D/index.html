<!doctype html>
<html>

<body>
  <canvas width="512" height="512"></canvas>
  <script>
    const tam = 32;
    let jugadorX = 0, jugadorY = 0;

    const mapa = [
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      [1, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 1],
      [1, 2, 1, 1, 2, 1, 1, 2, 1, 1, 2, 1, 1, 2, 2, 1],
      [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1],
      [1, 2, 1, 1, 2, 1, 2, 1, 1, 1, 2, 1, 2, 1, 2, 1],
      [1, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 1, 2, 2, 2, 1],
      [1, 2, 1, 1, 2, 1, 1, 4, 4, 1, 2, 1, 1, 2, 2, 1],
      [1, 2, 2, 2, 2, 1, 6, 6, 6, 1, 2, 2, 2, 2, 2, 1],
      [1, 2, 1, 1, 2, 1, 6, 6, 6, 1, 2, 1, 1, 2, 2, 1],
      [1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1],
      [1, 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 1],
      [1, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 1, 2, 2, 2, 1],
      [1, 2, 1, 1, 2, 1, 2, 5, 2, 1, 2, 1, 2, 1, 2, 1],
      [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    ];

    const canvas = document.querySelector("canvas");
    const ctx = canvas.getContext("2d");

    function dibujarMapa() {
      for (let fila = 0; fila < 16; fila++) {
        for (let col = 0; col < 16; col++) {
          let celda = mapa[fila][col];
          if (celda === 1) {
            ctx.fillStyle = "#000";
            ctx.fillRect(col * tam, fila * tam, tam, tam);
          }
          if (celda === 5) {
            if (jugadorX === 0) jugadorX = col;
            if (jugadorY === 0) jugadorY = fila;
            ctx.fillStyle = "red";
            ctx.beginPath();
            ctx.arc(col * tam + tam / 2, fila * tam + tam / 2, tam / 4, 0, Math.PI * 2);
            ctx.fill();
          }
        }
      }
    }

    function pintarJugador() {
      ctx.fillStyle = "red";
      ctx.beginPath();
      ctx.arc(jugadorX * tam + tam / 2, jugadorY * tam + tam / 2, tam / 2, 0, Math.PI * 2);
      ctx.fill();
    }

    dibujarMapa();

    document.body.onkeydown = e => {
      let nx = jugadorX, ny = jugadorY;
      if (e.key === "w") ny--;
      if (e.key === "s") ny++;
      if (e.key === "a") nx--;
      if (e.key === "d") nx++;

      if (mapa[ny] && mapa[ny][nx] !== 1) {
        jugadorX = nx;
        jugadorY = ny;
      }

      ctx.clearRect(0, 0, 512, 512);
      dibujarMapa();
      pintarJugador();
    };
  </script>
</body>

</html>